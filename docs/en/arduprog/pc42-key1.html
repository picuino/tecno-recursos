<!DOCTYPE html>
<html class="no-js" lang="en" >
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="keywords" content="Technology, Secondary Education, Drawing, Structures, Mechanisms, Materials, Electricity, Electronics, Computer Science, Programming, Control, Arduino, Communications, Workshop">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Libre educational resources for Technology in Secondary Education. Arduino - Control Panel PC42 - 5. Buttons and States">
  <title>5. Buttons and States - Control Panel PC42 - Picuino</title>

  
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96.png">
  <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48.png">

  
  <link rel="canonical" href="https://www.picuino.com/en/arduprog/pc42-key1.html">

  
  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within ..."
        href="../_static/opensearch.xml">

  <link rel="stylesheet" href="../_static/theme.css" type="text/css">
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css">
  <link rel="stylesheet" href="../_static/custom.css" type="text/css">
  <link rel="glossary" title="Glossary" href="../genindex.html">
  <link rel="index" title="Index" href="../content.html">
  <link rel="search" title="Search" href="../search.html">
  <link rel="next" title="6. Pushbuttons and Events" href="pc42-key2.html">
  <link rel="prev" title="4. LED flashing" href="pc42-led2.html">

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    <div data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../content.html"><img src="../_static/logo-picuino-bgblue.png" alt="O_[]¯O Picuino"></a>
      </nav>

	  <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../content.html">Home</a>/</li>
        
          <li><a href="index.html">Arduino</a>/</li>
        
          <li><a href="pc42-index.html">Control Panel PC42</a>/</li>
        
      <li><span class="section-number">5. </span>Buttons and States</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/arduprog/pc42-key1.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  

  
  <div style="background-color:#fdd; padding: 6px; margin:12px 0 12px 0">
  Attention: this page comes from an automatic translation of the original Spanish page.
  If you would like to collaborate, please
  <a href="../contacto.html" target="_blank">contact</a> the author
  with the updated
  <a href="https://raw.githubusercontent.com/picuino/tecno-recursos/main/locale/en/LC_MESSAGES/arduprog/pc42-key1.po" target="_blank">translation file</a>.
  </div>
  
  <hr>

</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pulsadores-y-estados">
<span id="pc42-key1"></span><h1><span class="section-number">5. </span>Buttons and States<a class="headerlink" href="#pulsadores-y-estados" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="../_images/img-0095.jpg"><img alt="Pulsador." class="align-center" src="../_images/img-0095.jpg" style="width: 300px;"></a>
<div class="section" id="objetivos">
<h2>Goals<a class="headerlink" href="#objetivos" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Read the status of a button.</li>
<li>Program Arduino to respond to user keystrokes.</li>
</ul>
</div>
<div class="section" id="pulsadores-del-panel-de-control-pc42">
<h2>PC42 control panel pushbuttons<a class="headerlink" href="#pulsadores-del-panel-de-control-pc42" title="Permalink to this headline">¶</a></h2>
<p>The PC42 panel has a keyboard with six buttons. Each button is identified with a number or a constant that bears its name. The name of each button can be seen on the screen printing of the printed circuit. The six constants and numbers that represent the buttons are as follows.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width:48%;">
<col style="width:52%;">
</colgroup>
<thead style="vertical-align:bottom;">
<tr class="row-odd"><th class="head">Constant</th>
<th class="head">Button</th>
</tr>
</thead>
<tbody style="vertical-align:top;">
<tr class="row-even"><td>KEY_LEFT</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>KEY_RIGHT</td>
<td>2</td>
</tr>
<tr class="row-even"><td>KEY_DOWN</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>KEY_UP</td>
<td>4</td>
</tr>
<tr class="row-even"><td>KEY_ENTER</td>
<td>5</td>
</tr>
<tr class="row-odd"><td>KEY_BACK</td>
<td>6</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The key number will be represented in this manual as <code class="docutils literal notranslate"><span class="pre">keyNum</span></code>.</p>
</div>
<div class="section" id="la-funcion-keypressed">
<h2>The <a class="reference internal" href="#_CPPv410keyPressedi" title="keyPressed"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">keyPressed()</span></code></a> function<a class="headerlink" href="#la-funcion-keypressed" title="Permalink to this headline">¶</a></h2>
<dl class="cpp function">
<dt id="_CPPv410keyPressedi">
<span id="_CPPv310keyPressedi"></span><span id="_CPPv210keyPressedi"></span><span id="keyPressed__i"></span>int <code class="descname">keyPressed</code><span class="sig-paren">(</span>int <em>keyNum</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410keyPressedi" title="Permalink to this definition">¶</a><br></dt>
<dd><p>This function returns the value of a button. Returns the value 1 if the button is pressed and 0 if it is not. The value of this function filters out electrical noise and bounce.</p>
<p><strong>Electrical noise</strong> is interference associated with electric motors, switches, modern energy-saving lamps or mobile phones. Any of these devices can cause a button to appear to be pressed for a brief moment even though it is not. It is highly recommended to filter this noise to avoid 'false' or 'ghost' keystrokes.</p>
<p>Bouncing is a phenomenon that causes the push button to not make contact for a short period of time, a few milliseconds, right after it is pressed because the sheet metal 'bounces' and stops making contact. This phenomenon can cause one click to be interpreted as two clicks, so it is recommended that you filter it to eliminate it.</p>
<p>The disadvantage of this noise filter is that this function has a 20 millisecond delay in responding from when the actual state of the switch changes to when it returns the correct value.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">KEY_ALL</span></code> argument is used, the function returns a number that depends on the sum of the keys that are pressed.</p>
<table class="docutils align-default">
<colgroup>
<col style="width:34%;">
<col style="width:26%;">
<col style="width:40%;">
</colgroup>
<thead style="vertical-align:bottom;">
<tr class="row-odd"><th class="head">Button pressed</th>
<th class="head">Return value</th>
<th class="head">Return value (binary)</th>
</tr>
</thead>
<tbody style="vertical-align:top;">
<tr class="row-even"><td>KEY_LEFT</td>
<td>1</td>
<td>0b000001</td>
</tr>
<tr class="row-odd"><td>KEY_RIGHT</td>
<td>2</td>
<td>0b000010</td>
</tr>
<tr class="row-even"><td>KEY_DOWN</td>
<td>4</td>
<td>0b000100</td>
</tr>
<tr class="row-odd"><td>KEY_UP</td>
<td>8</td>
<td>0b001000</td>
</tr>
<tr class="row-even"><td>KEY_ENTER</td>
<td>16</td>
<td>0b010000</td>
</tr>
<tr class="row-odd"><td>KEY_BACK</td>
<td>32</td>
<td>0b100000</td>
</tr>
</tbody>
</table>
<p>If button 4 is pressed, the function will return the value 8. With button 6 pressed, the function will return the value 32. If both buttons 4 and 6 are pressed at the same time, the function will return the sum of 8 and 32 i.e. 40.</p>
<p><code class="docutils literal notranslate"><span class="pre">keyNum</span></code>: número del 1 al 6 que representa al pulsador
del que se solicita su valor. El valor 0 representa a todos los pulsadores juntos.</p>
<p>Se pueden utizar también los valores predefinidos
<code class="docutils literal notranslate"><span class="pre">KEY_LEFT</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_RIGHT</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_DOWN</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_UP</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_ENTER</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_BACK</span></code> y <code class="docutils literal notranslate"><span class="pre">KEY_ALL</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="encender-un-led-con-un-pulsador">
<h2>Turn on a led with a button<a class="headerlink" href="#encender-un-led-con-un-pulsador" title="Permalink to this headline">¶</a></h2>
<p>The following program will turn on led D1 when button 1 is pressed (<code class="docutils literal notranslate"><span class="pre">KEY_LEFT</span></code>)</p>
<div class="highlight-Arduino notranslate" id="button-keypressed-on"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Enciende el led D1 cuando se presione el pulsador 1</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>   <span class="c1">// Inicializar el módulo PC42</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
   <span class="kr">int</span> <span class="n">on_off</span><span class="p">;</span>
   <span class="n">on_off</span> <span class="o">=</span> <span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="n">KEY_LEFT</span><span class="p">);</span> <span class="c1">// Lee el estado del pulsador 1</span>
   <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">on_off</span><span class="p">);</span>           <span class="c1">// Enciende el led D1 si está</span>
                                     <span class="c1">// presionado el pulsador 1</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Equivalent program in the Ardublock environment:</p>
<a class="reference internal image-reference" href="../_images/ardublock_keyPressed.png"><img alt="Programa de Ardublock para encender el led D1 con el pulsador 1 del panel de control PC42" src="../_images/ardublock_keyPressed.png" style="width: 624px;"></a>
<p>In this link you can download the <a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed.abp"><code class="xref download docutils literal notranslate"><span class="pre">program</span> <span class="pre">file</span> <span class="pre">for</span> <span class="pre">Ardublock</span> <span class="pre">environment</span> <span class="pre">'keyPressed'</span></code></a></p>
</div>
<div class="section" id="apagar-un-led-con-un-pulsador">
<h2>Turn off a led with a button<a class="headerlink" href="#apagar-un-led-con-un-pulsador" title="Permalink to this headline">¶</a></h2>
<p>The following program will perform the opposite function to the previous one, it will turn off led D1 when button 1 is pressed (<code class="docutils literal notranslate"><span class="pre">KEY_LEFT</span></code>)</p>
<div class="highlight-Arduino notranslate" id="button-keypressed-off"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Apaga el led D1 presionando el pulsador 1</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>                  <span class="c1">// Inicializar el módulo PC42</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
   <span class="kr">int</span> <span class="n">on_off</span><span class="p">;</span>
   <span class="n">on_off</span> <span class="o">=</span> <span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>   <span class="c1">// Lee el estado del pulsador 1</span>
   <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">!</span><span class="n">on_off</span><span class="p">);</span>     <span class="c1">// Enciende el led D1 si no está</span>
                                <span class="c1">// presionado el pulsador 1</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The Arduino language allows you to write the last function of the above program in many other ways. These are some alternatives that achieve the same result.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Enciende el led D1 si el pulsador 1 no está presionado</span>

<span class="c1">// Función NOT lógico</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">!</span><span class="n">on_off</span><span class="p">);</span>

<span class="c1">// Función Negación binaria</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">~</span><span class="n">on_off</span><span class="p">);</span>

<span class="c1">// Función resta</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">-</span><span class="n">on_off</span><span class="p">);</span>

<span class="c1">// Funciones de comparación</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">on_off</span> <span class="o">==</span> <span class="mi">0</span><span class="p">));</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">on_off</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">));</span>

<span class="c1">// Función XOR</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">on_off</span> <span class="o">^</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>As you can see, the Arduino language is very rich in expressions. Thanks to this it is a very powerful language and, in turn, complex to learn. For this reason, in the following examples the minimum number of logical expressions will appear, so as not to complicate learning.</p>
<p>The equivalent program in the Ardublock environment is simpler:</p>
<a class="reference external image-reference" href="../_downloads/ardublock_keyPressed_2.abp" rel="noopener noreferrer" target="_blank"><img alt="Programa de Ardublock para apagar el led D1 con el pulsador 1 del panel de control PC42" src="../_images/ardublock_keyPressed_2.png" style="width: 668px;"></a>
<p><a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed_2.abp"><code class="xref download docutils literal notranslate"><span class="pre">Program</span> <span class="pre">for</span> <span class="pre">Ardublock</span> <span class="pre">environment:</span> <span class="pre">'keyPressed_2'</span></code></a></p>
</div>
<div class="section" id="la-funcion-keyvalue">
<h2>The <a class="reference internal" href="#_CPPv48keyValuei" title="keyValue"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">keyValue()</span></code></a> function<a class="headerlink" href="#la-funcion-keyvalue" title="Permalink to this headline">¶</a></h2>
<dl class="cpp function">
<dt id="_CPPv48keyValuei">
<span id="_CPPv38keyValuei"></span><span id="_CPPv28keyValuei"></span><span id="keyValue__i"></span>int <code class="descname">keyValue</code><span class="sig-paren">(</span>int <em>keyNum</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv48keyValuei" title="Permalink to this definition">¶</a><br></dt>
<dd><p>This function is similar to the <a class="reference internal" href="#_CPPv410keyPressedi" title="keyPressed"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">keyPressed()</span></code></a> function seen above. Returns the value of a button. If the key is pressed, it returns the value 1; if the key is not pressed, it returns the value 0. This function does not filter out electrical noise like the <a class="reference internal" href="#_CPPv410keyPressedi" title="keyPressed"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">keyPressed()</span></code></a> function does.</p>
<p>This function returns the current state of the switch without a filter, and therefore can return false values ​​caused by electrical noise or bouncing.</p>
<p>As an advantage, this function returns the value of the button without a time delay in the response.</p>
<p><code class="docutils literal notranslate"><span class="pre">keyNum</span></code>: número del 1 al 6 que representa al pulsador
del que se solicita su valor. El valor 0 representa a todos los pulsadores juntos.</p>
<p>Se pueden utizar también los valores predefinidos
<code class="docutils literal notranslate"><span class="pre">KEY_LEFT</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_RIGHT</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_DOWN</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_UP</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_ENTER</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_BACK</span></code> y <code class="docutils literal notranslate"><span class="pre">KEY_ALL</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="ejercicios">
<h2>Exercises<a class="headerlink" href="#ejercicios" title="Permalink to this headline">¶</a></h2>
<p>Program the code needed to solve the following problems.</p>
<ol class="arabic">
<li><p class="first">Turn on led D1 with button 1 and turn off led D1 with button 2. Correct the syntactic errors of the following program. The most common errors are: forgetting the semicolon at the end of the statement, changing case, forgetting a bracket or parenthesis. Arduino helps to find errors in two ways. When typing a successful function, it appears in orange. When compiling the code, the lower window informs about the errors found.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Programa con errores.</span>
<span class="c1">// Enciende el led D1 con el pulsador 1 y</span>
<span class="c1">// apaga el led D1 con el pulsador 2</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="n">Begin</span><span class="p">();</span>                 <span class="c1">// Inicializar el módulo PC42</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="n">keypressed</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>       <span class="c1">// Si (pulsador 1 está presionado)</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>  <span class="c1">//   Enciende led D1</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="n">keypressed</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>       <span class="c1">// Si (pulsador 2 está presionado)</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">LED_OFF</span><span class="p">)</span>  <span class="c1">//   Apaga el led D1</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Turn on all the leds as follows. LED D1 will light up when button 1 is pressed. Then LED D2 will light up when button 2 is pressed. The program will continue in this way until 5 LEDs light up. Complete the program below.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Programa incompleto.</span>
<span class="c1">// Enciende todos los ledes uno a uno y por orden</span>
<span class="c1">// con todos los pulsadores</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>   <span class="c1">// Inicializar el módulo PC42</span>

   <span class="c1">// Mientras (pulsador 1 no esta presionado), espera</span>
   <span class="k">while</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>

   <span class="c1">// Enciende el led D1</span>
   <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>


<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Equivalent program in the Ardublock environment:</p>
<a class="reference external image-reference" href="../_downloads/ardublock_keyPressed_3.abp" rel="noopener noreferrer" target="_blank"><img alt="Programa de Ardublock para encender una secuencia de led con los pulsadores" src="../_images/ardublock_keyPressed_3.png" style="width: 669px;"></a>
<p><a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed_3.abp"><code class="xref download docutils literal notranslate"><span class="pre">Program</span> <span class="pre">for</span> <span class="pre">Ardublock</span> <span class="pre">environment:</span> <span class="pre">'keyPressed_3'</span></code></a></p>
</li>
<li><p class="first">When starting, led D1 will light up. When button 1 is pressed, led D1 will go out and the next led will light up. The light will thus move to the right up to led D5. By pressing button 5, LED D5 will turn off and LED D1 will turn on again. Complete the program below according to the comments.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Programa incompleto.</span>
<span class="c1">// Mover la luz de los ledes hacia la derecha</span>
<span class="c1">// con los pulsadores</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">int</span> <span class="n">i</span><span class="p">;</span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>              <span class="c1">// Inicializar el módulo PC42</span>
   <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>                   <span class="c1">// El primer led encendido es el 1</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>   <span class="c1">// Enciende el led i</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="p">{</span>   <span class="c1">// Si (pulsador i está presionado)</span>
      <span class="n">pc</span><span class="p">.</span>                    <span class="c1">//    Apaga el led i</span>
      <span class="n">i</span> <span class="o">=</span>                    <span class="c1">//    Aumenta i en una unidad</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">)</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>      <span class="c1">// Si (i es mayor que 6) i vale 1</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Equivalent program in the Ardublock environment:</p>
<a class="reference external image-reference" href="../_downloads/ardublock_keyPressed_4.abp" rel="noopener noreferrer" target="_blank"><img alt="Programa de Ardublock para encender una secuencia de led con los pulsadores" src="../_images/ardublock_keyPressed_4.png" style="width: 672px;"></a>
<p><a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed_4.abp"><code class="xref download docutils literal notranslate"><span class="pre">Program</span> <span class="pre">for</span> <span class="pre">Ardublock</span> <span class="pre">environment:</span> <span class="pre">'keyPressed_4'</span></code></a></p>
</li>
<li><p class="first">Modify the previous program so that the leds light up from D6 to D1. When it is time to turn off led D1, led D6 will light up again.</p>
</li>
<li><p class="first">The three leds D1, D2 and D3 will turn on when the three buttons 1, 2 and 3 are pressed at the same time. It uses the '&amp;&amp;' operator that evaluates if two conditions occur at the same time. Complete the program below according to the comments.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Programa incompleto.</span>
<span class="c1">// Enciende los ledes D1, D2, D3 cuando</span>
<span class="c1">// se presionen los pulsadores 1, 2 y 3</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>                <span class="c1">// Inicializar el módulo PC42</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>

   <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="o">&amp;&amp;</span>   <span class="c1">// Si ( (pulsador 1 presionado) y</span>
       <span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="o">&amp;&amp;</span>   <span class="c1">//      (pulsador 2 presionado) y</span>
       <span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="p">{</span>    <span class="c1">//      (pulsador 3 presionado))</span>
      <span class="n">pc</span><span class="p">.</span>                     <span class="c1">//    Enciende los ledes D1, D2 y D3</span>


   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Equivalent program in the Ardublock environment:</p>
<a class="reference external image-reference" href="../_downloads/ardublock_keyPressed_5.abp" rel="noopener noreferrer" target="_blank"><img alt="Programa de Ardublock para encender una secuencia de led con los pulsadores" src="../_images/ardublock_keyPressed_5.png" style="width: 680px;"></a>
<p><a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed_5.abp"><code class="xref download docutils literal notranslate"><span class="pre">Program</span> <span class="pre">for</span> <span class="pre">Ardublock</span> <span class="pre">environment:</span> <span class="pre">'keyPressed_5'</span></code></a></p>
</li>
<li><p class="first">After pressing the sequence of buttons 2, 4 and 1 in order, an electronic lock will open. The opening will be indicated by turning on the red, yellow and green leds in sequence, one every second. Fill in the gaps in the program below according to the comments.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Programa incompleto.</span>
<span class="c1">// Cerradura electrónica</span>
<span class="c1">// Presionar la secuencia 2, 4, 1 para abrir la cerradura</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">int</span> <span class="nf">step</span><span class="p">;</span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>   <span class="c1">// Inicializar el módulo PC42</span>
   <span class="nf">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>     <span class="c1">// Espera la pulsación del primer pulsador</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>

   <span class="c1">// Si (etapa del programa es 1)</span>
   <span class="k">if</span> <span class="p">(</span><span class="nf">step</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Si (solo el pulsador 2 presionado)</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mb">0b00000010</span><span class="p">)</span> <span class="p">{</span>

         <span class="c1">// Espera a que no esté presionado</span>
         <span class="k">while</span><span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>

         <span class="c1">// Pasa a la siguiente etapa del programa</span>
         <span class="nf">step</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
      <span class="p">}</span>
   <span class="p">}</span>

   <span class="c1">// Si (etapa del programa es 2)</span>
   <span class="k">if</span> <span class="p">(</span><span class="nf">step</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Si (solo el pulsador 4 presionado)</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mb">0b001000</span><span class="p">)</span> <span class="p">{</span>

         <span class="c1">// Espera a que no esté presionado</span>
         <span class="k">while</span><span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>

         <span class="c1">// Pasa a la siguiente etapa del programa</span>
         <span class="nf">step</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
      <span class="p">}</span>
   <span class="p">}</span>

   <span class="c1">// Si (etapa del programa es 3)</span>
   <span class="k">if</span> <span class="p">(</span><span class="nf">step</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Si (solo el pulsador 1 presionado)</span>
      <span class="k">if</span> <span class="p">(</span>                       <span class="p">)</span> <span class="p">{</span>

         <span class="c1">// Espera a que no esté presionado</span>


         <span class="c1">// Pasa a la siguiente etapa del programa</span>

      <span class="p">}</span>
   <span class="p">}</span>

   <span class="c1">// Si (etapa del programa es 4)</span>
   <span class="k">if</span> <span class="p">(</span><span class="nf">step</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Enciende el led rojo y espera un segundo</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>
      <span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>

      <span class="c1">// Enciende el led amarillo y espera un segundo</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>
      <span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>

      <span class="c1">// Enciende el led verde y espera un segundo</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>
      <span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>

      <span class="c1">// Apaga todos los ledes</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledBegin</span><span class="p">();</span>

      <span class="c1">// Pasa a la primera etapa del programa</span>
      <span class="nf">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Equivalent program in the Ardublock environment:</p>
<a class="reference external image-reference" href="../_downloads/ardublock_keyPressed_6.abp" rel="noopener noreferrer" target="_blank"><img alt="Programa de Ardublock para encender una secuencia de led con los pulsadores" src="../_images/ardublock_keyPressed_6.png" style="width: 854px;"></a>
<p><a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed_6.abp"><code class="xref download docutils literal notranslate"><span class="pre">Program</span> <span class="pre">for</span> <span class="pre">Ardublock</span> <span class="pre">environment:</span> <span class="pre">'keyPressed_6'</span></code></a></p>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>

  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pc42-key2.html" class="btn btn-neutral float-right" title="6. Pushbuttons and Events" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pc42-led2.html" class="btn btn-neutral" title="4. LED flashing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr>

  <div role="contentinfo">
    <ul class="link-list">
    <li><a href="../contacto.html" target="_blank">Contact</a></li>
    <li><a href="../manifiesto.html" target="_blank">Manifest</a></li>
    <li><a href="../../es/legal-aviso.html" target="_blank">Terms Of Service</a></li>
    <li><a href="../legal-cookies.html" target="_blank">Cookie policy</a></li>
    <li><a href="../legal-attribution.html" target="_blank">Credits</a></li>
    <li><a href="../genindex.html" target="_blank">Glossary</a></li>
    <li><a href="../content.html" target="_blank">Index</a></li>
    </ul>
    <p class="content-info">
      Copyright &copy; 2013-2025, Carlos Félix Pardo Martín.
      <br>

      Contents under <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank">CC BY-SA 4.0 license</a>
      and computer programs under <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank">GPL v3 license</a>
      unless otherwise specified.
      <br>
      <span class="lastupdated">
        Last updated on January, 2025.
      </span>

    </p>
  </div> 

</footer>


          

        </div>
      </div>

    </div>


    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo-picuino-bgblue.png" class="logo" alt="O_[]¯O Picuino">
          
          </a>
          <br>
          <a href="../../es/arduprog/pc42-key1.html">Español</a>
          <br>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs">
    <input type="hidden" name="check_keywords" value="yes">
    <input type="hidden" name="area" value="default">
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../dibujo-index.html">Technical drawing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mecan-index.html">Mechanics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../material-index.html">Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../electric-index.html">Electricity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../electronic-index.html">Electronics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../informatica-index.html">Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prog-index.html">Programming</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Arduino</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="protoboard-index.html">Circuits with Breadboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="prog-index.html">Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-index.html">Resources</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="pc42-index.html">Control Panel PC42</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pc42-intro.html">1. Introduction to Panel PC42</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-install.html">2. PC42 Control Panel Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-led1.html">3. Turning the LEDs on and off</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-led2.html">4. LED flashing</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">5. Buttons and States</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-key2.html">6. Pushbuttons and Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-key3.html">7. Buttons and Counters</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-display1.html">8. 7 segment display</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-buzzer.html">9. Buzzer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ardublock-index.html">Ardublock</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uno-doc/index.html">Shield Weevil UNO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../robotica-index.html">Robótica</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comm-index.html">Communications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../taller-index.html">Technology Workshop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recursos-index.html">Another resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ley-index.html">Educational Legislation</a></li>
</ul>

            
          

          <!-- Enlaces directos -->
          <br>
          <ul>
          <li class="toctree-l1"><a class="reference internal"
          href="https://www.picuino.com/es/manifiesto.html">Manifiesto</a>
          </li><li class="toctree-l1"><a class="reference internal"
          href="https://www.picuino.com/test/">Technology Test</a>
          </li><li class="toctree-l1"><a class="reference internal"
          href="https://www.picuino.com/circuits/">Circuits simulator</a>
          </li><li class="toctree-l1"><a class="reference internal"
          href="https://github.com/picuino/tecno-recursos">Project in GitHub</a>
          </li>
          </ul>
        </div>
      </div>
    </nav>

  </div>
  


  

    
    
      <script defer id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    

   

  <script defer src="../_static/theme.js"></script>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

</body>
</html>