<!DOCTYPE html>
<html class="no-js" lang="es" >
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="keywords" content="Tecnología, Educación Secundaria, Dibujo, Estructuras, Mecanismos, Materiales, Electricidad, Electrónica, Informática, Programación, Control, Arduino, Comunicaciones, Taller, Legislación Educativa">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Recursos educativos libres para Tecnología en Educación Secundaria. Arduino - Panel de Control PC42 - 5. Pulsadores y Estados">
  <title>5. Pulsadores y Estados - Panel de Control PC42 - Picuino</title>

  
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96.png">
  <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48.png">

  
  <link rel="canonical" href="https://www.picuino.com/es/arduprog/pc42-key1.html">

  
  <link rel="search" type="application/opensearchdescription+xml"
        title="Search within ..."
        href="../_static/opensearch.xml">

  <link rel="stylesheet" href="../_static/theme.css" type="text/css">
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css">
  <link rel="stylesheet" href="../_static/custom.css" type="text/css">
  <link rel="glossary" title="Glossary" href="../genindex.html">
  <link rel="index" title="Índice" href="../content.html">
  <link rel="search" title="Búsqueda" href="../search.html">
  <link rel="next" title="6. Pulsadores y Eventos" href="pc42-key2.html">
  <link rel="prev" title="4. Parpadeo de los LED" href="pc42-led2.html">

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    <div data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../content.html"><img src="../_static/logo-picuino-bgblue.png" alt="O_[]¯O Picuino"></a>
      </nav>

	  <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../content.html">Home</a>/</li>
        
          <li><a href="index.html">Arduino</a>/</li>
        
          <li><a href="pc42-index.html">Panel de Control PC42</a>/</li>
        
      <li><span class="section-number">5. </span>Pulsadores y Estados</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/arduprog/pc42-key1.rst.txt" rel="nofollow"> Ver texto fuente</a>
          
        
      </li>
    
  </ul>

  

  
  <hr>

</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pulsadores-y-estados">
<span id="pc42-key1"></span><h1><span class="section-number">5. </span>Pulsadores y Estados<a class="headerlink" href="#pulsadores-y-estados" title="Enlazar permanentemente con este título">¶</a></h1>
<a class="reference internal image-reference" href="../_images/img-0095.jpg"><img alt="Pulsador." class="align-center" src="../_images/img-0095.jpg" style="width: 300px;"></a>
<div class="section" id="objetivos">
<h2>Objetivos<a class="headerlink" href="#objetivos" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li>Leer el estado de un pulsador.</li>
<li>Programar Arduino para que responda a las pulsaciones del usuario.</li>
</ul>
</div>
<div class="section" id="pulsadores-del-panel-de-control-pc42">
<h2>Pulsadores del panel de control PC42<a class="headerlink" href="#pulsadores-del-panel-de-control-pc42" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El panel PC42 dispone de un teclado con seis pulsadores.
Cada pulsador se identifica con un número o con una constante que
lleva su nombre.
El nombre de cada pulsador puede verse en la serigrafía del circuito
impreso.
Las seis constantes y números que representan a los pulsadores son
los siguientes.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width:48%;">
<col style="width:52%;">
</colgroup>
<thead style="vertical-align:bottom;">
<tr class="row-odd"><th class="head">Constante</th>
<th class="head">Pulsador</th>
</tr>
</thead>
<tbody style="vertical-align:top;">
<tr class="row-even"><td>KEY_LEFT</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>KEY_RIGHT</td>
<td>2</td>
</tr>
<tr class="row-even"><td>KEY_DOWN</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>KEY_UP</td>
<td>4</td>
</tr>
<tr class="row-even"><td>KEY_ENTER</td>
<td>5</td>
</tr>
<tr class="row-odd"><td>KEY_BACK</td>
<td>6</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>El número de pulsador se representará en este manual como <code class="docutils literal notranslate"><span class="pre">keyNum</span></code>.</p>
</div>
<div class="section" id="la-funcion-keypressed">
<h2>La función <a class="reference internal" href="#_CPPv410keyPressedi" title="keyPressed"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">keyPressed()</span></code></a><a class="headerlink" href="#la-funcion-keypressed" title="Enlazar permanentemente con este título">¶</a></h2>
<dl class="cpp function">
<dt id="_CPPv410keyPressedi">
<span id="_CPPv310keyPressedi"></span><span id="_CPPv210keyPressedi"></span><span id="keyPressed__i"></span>int <code class="descname">keyPressed</code><span class="sig-paren">(</span>int <em>keyNum</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410keyPressedi" title="Enlazar permanentemente con esta definición">¶</a><br></dt>
<dd><p>Esta función devuelve el valor de un pulsador.
Devuelve el valor 1 si el pulsador está presionado y 0 si no lo
está.
El valor de esta función filtra el ruido eléctrico y los rebotes.</p>
<p>El <strong>ruido eléctrico</strong> son interferencias asociadas a los
motores eléctricos, a los interruptores, a las modernas lámparas
de bajo consumo o a los teléfonos móviles.
Cualquiera de estos aparatos puede provocar que durante un breve
momento un pulsador parezca estar presionado aunque no sea
cierto.
Es muy recomendable filtrar este ruido para evitar pulsaciones
'falsas' o 'fantasmas'.</p>
<p>Los rebotes son un fenómeno que provoca que el pulsador no haga
contacto durante un periodo corto de tiempo, unos milisegundos,
justo después de presionarle porque la chapa metálica 'rebota'
y deja de hacer contacto. Este fenómeno puede provocar
que se interprete una pulsación como dos pulsaciones, por lo que
es recomendable que se filtre para eliminarlo.</p>
<p>La desventaja de este filtro de ruido consiste en que esta función
tiene un retardo de 20 milisegundos en responder desde que cambia
el estado real del pulsador hasta que devuelve el valor correcto.</p>
<p>Si se utiliza el argumento <code class="docutils literal notranslate"><span class="pre">KEY_ALL</span></code>, la función devuelve un
número que depende de la suma de los pulsadores que se encuentren
presionados.</p>
<table class="docutils align-default">
<colgroup>
<col style="width:34%;">
<col style="width:26%;">
<col style="width:40%;">
</colgroup>
<thead style="vertical-align:bottom;">
<tr class="row-odd"><th class="head">Pulsador presionado</th>
<th class="head">Valor devuelto</th>
<th class="head">Valor devuelto (binario)</th>
</tr>
</thead>
<tbody style="vertical-align:top;">
<tr class="row-even"><td>KEY_LEFT</td>
<td>1</td>
<td>0b000001</td>
</tr>
<tr class="row-odd"><td>KEY_RIGHT</td>
<td>2</td>
<td>0b000010</td>
</tr>
<tr class="row-even"><td>KEY_DOWN</td>
<td>4</td>
<td>0b000100</td>
</tr>
<tr class="row-odd"><td>KEY_UP</td>
<td>8</td>
<td>0b001000</td>
</tr>
<tr class="row-even"><td>KEY_ENTER</td>
<td>16</td>
<td>0b010000</td>
</tr>
<tr class="row-odd"><td>KEY_BACK</td>
<td>32</td>
<td>0b100000</td>
</tr>
</tbody>
</table>
<p>Si se encuentra presionado el pulsador 4, la función devolverá el valor
8. Con el pulsador 6 presionado, la función devolverá el valor 32.
Si se presionan los dos pulsadores 4 y 6 a la vez, la función devolverá
la suma de 8 y 32, es decir 40.</p>
<p><code class="docutils literal notranslate"><span class="pre">keyNum</span></code>: número del 1 al 6 que representa al pulsador
del que se solicita su valor. El valor 0 representa a todos los pulsadores juntos.</p>
<p>Se pueden utizar también los valores predefinidos
<code class="docutils literal notranslate"><span class="pre">KEY_LEFT</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_RIGHT</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_DOWN</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_UP</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_ENTER</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_BACK</span></code> y <code class="docutils literal notranslate"><span class="pre">KEY_ALL</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="encender-un-led-con-un-pulsador">
<h2>Encender un led con un pulsador<a class="headerlink" href="#encender-un-led-con-un-pulsador" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El siguiente programa encenderá el led D1 cuando se presione el
pulsador 1 (<code class="docutils literal notranslate"><span class="pre">KEY_LEFT</span></code>)</p>
<div class="highlight-Arduino notranslate" id="button-keypressed-on"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Enciende el led D1 cuando se presione el pulsador 1</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>   <span class="c1">// Inicializar el módulo PC42</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
   <span class="kr">int</span> <span class="n">on_off</span><span class="p">;</span>
   <span class="n">on_off</span> <span class="o">=</span> <span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="n">KEY_LEFT</span><span class="p">);</span> <span class="c1">// Lee el estado del pulsador 1</span>
   <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">on_off</span><span class="p">);</span>           <span class="c1">// Enciende el led D1 si está</span>
                                     <span class="c1">// presionado el pulsador 1</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Programa equivalente en el entorno Ardublock:</p>
<a class="reference internal image-reference" href="../_images/ardublock_keyPressed.png"><img alt="Programa de Ardublock para encender el led D1 con el pulsador 1 del panel de control PC42" src="../_images/ardublock_keyPressed.png" style="width: 624px;"></a>
<p>En este enlace se puede descargar el
<a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed.abp"><code class="xref download docutils literal notranslate"><span class="pre">archivo</span> <span class="pre">de</span> <span class="pre">programa</span> <span class="pre">para</span> <span class="pre">entorno</span> <span class="pre">Ardublock</span> <span class="pre">'keyPressed'</span></code></a></p>
</div>
<div class="section" id="apagar-un-led-con-un-pulsador">
<h2>Apagar un led con un pulsador<a class="headerlink" href="#apagar-un-led-con-un-pulsador" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El siguiente programa realizará la función contraria al anterior,
apagará el led D1 cuando se presione el pulsador 1 (<code class="docutils literal notranslate"><span class="pre">KEY_LEFT</span></code>)</p>
<div class="highlight-Arduino notranslate" id="button-keypressed-off"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Apaga el led D1 presionando el pulsador 1</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>                  <span class="c1">// Inicializar el módulo PC42</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
   <span class="kr">int</span> <span class="n">on_off</span><span class="p">;</span>
   <span class="n">on_off</span> <span class="o">=</span> <span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>   <span class="c1">// Lee el estado del pulsador 1</span>
   <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">!</span><span class="n">on_off</span><span class="p">);</span>     <span class="c1">// Enciende el led D1 si no está</span>
                                <span class="c1">// presionado el pulsador 1</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>El lenguaje de Arduino permite escribir la última función del programa
anterior de muchas otras formas. Estas son algunas alternativas que
consiguen el mismo resultado.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Enciende el led D1 si el pulsador 1 no está presionado</span>

<span class="c1">// Función NOT lógico</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">!</span><span class="n">on_off</span><span class="p">);</span>

<span class="c1">// Función Negación binaria</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">~</span><span class="n">on_off</span><span class="p">);</span>

<span class="c1">// Función resta</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">-</span><span class="n">on_off</span><span class="p">);</span>

<span class="c1">// Funciones de comparación</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">on_off</span> <span class="o">==</span> <span class="mi">0</span><span class="p">));</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">on_off</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">));</span>

<span class="c1">// Función XOR</span>
<span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">on_off</span> <span class="o">^</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>Como se puede ver, el lenguaje de Arduino es muy rico en expresiones.
Gracias a esto es un lenguaje muy potente y, a su vez, complejo de aprender.
Por esta razón en los ejemplos siguientes aparecerá el mínimo número
de expresiones lógicas, para no complicar el aprendizaje.</p>
<p>El programa equivalente en el entorno Ardublock resulta más sencillo:</p>
<a class="reference external image-reference" href="../_downloads/ardublock_keyPressed_2.abp" rel="noopener noreferrer" target="_blank"><img alt="Programa de Ardublock para apagar el led D1 con el pulsador 1 del panel de control PC42" src="../_images/ardublock_keyPressed_2.png" style="width: 668px;"></a>
<p><a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed_2.abp"><code class="xref download docutils literal notranslate"><span class="pre">Programa</span> <span class="pre">para</span> <span class="pre">entorno</span> <span class="pre">Ardublock:</span> <span class="pre">'keyPressed_2'</span></code></a></p>
</div>
<div class="section" id="la-funcion-keyvalue">
<h2>La función <a class="reference internal" href="#_CPPv48keyValuei" title="keyValue"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">keyValue()</span></code></a><a class="headerlink" href="#la-funcion-keyvalue" title="Enlazar permanentemente con este título">¶</a></h2>
<dl class="cpp function">
<dt id="_CPPv48keyValuei">
<span id="_CPPv38keyValuei"></span><span id="_CPPv28keyValuei"></span><span id="keyValue__i"></span>int <code class="descname">keyValue</code><span class="sig-paren">(</span>int <em>keyNum</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv48keyValuei" title="Enlazar permanentemente con esta definición">¶</a><br></dt>
<dd><p>Esta función es semejante a la función <a class="reference internal" href="#_CPPv410keyPressedi" title="keyPressed"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">keyPressed()</span></code></a>
vista anteriormente.
Devuelve el valor de un pulsador. Si el pulsador está presionado,
devuelve el valor 1 si el pulsador no está presionado devuelve el
valor 0.
Esta función no filtra el ruido eléctrico como lo hace la función
<a class="reference internal" href="#_CPPv410keyPressedi" title="keyPressed"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">keyPressed()</span></code></a>.</p>
<p>Esta función devuelve el estado actual del pulsador sin filtro y,
por lo tanto, puede devolver valores falsos producidos por el
ruido eléctrico o los rebotes.</p>
<p>Como ventaja, esta función devuelve el valor del pulsador sin
retraso de tiempo en la respuesta.</p>
<p><code class="docutils literal notranslate"><span class="pre">keyNum</span></code>: número del 1 al 6 que representa al pulsador
del que se solicita su valor. El valor 0 representa a todos los pulsadores juntos.</p>
<p>Se pueden utizar también los valores predefinidos
<code class="docutils literal notranslate"><span class="pre">KEY_LEFT</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_RIGHT</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_DOWN</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_UP</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_ENTER</span></code>, <code class="docutils literal notranslate"><span class="pre">KEY_BACK</span></code> y <code class="docutils literal notranslate"><span class="pre">KEY_ALL</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="ejercicios">
<h2>Ejercicios<a class="headerlink" href="#ejercicios" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Programa el código necesario para resolver los siguientes problemas.</p>
<ol class="arabic">
<li><p class="first">Encender el led D1 con el pulsador 1 y apagar el led D1 con el pulsador
2. Corregir los errores sintácticos del siguiente programa.
Los errores más comunes son: olvidar el punto y coma al final de la
instrucción, cambiar mayúsculas y minúsculas, olvidar un corchete o
paréntesis.
Arduino ayuda a encontrar los errores de dos maneras.
Al escribir una función correcta, esta aparece con un color naranja.
Al compilar el código, la ventana inferior informa sobre los errores
encontrados.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Programa con errores.</span>
<span class="c1">// Enciende el led D1 con el pulsador 1 y</span>
<span class="c1">// apaga el led D1 con el pulsador 2</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="n">Begin</span><span class="p">();</span>                 <span class="c1">// Inicializar el módulo PC42</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="n">keypressed</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>       <span class="c1">// Si (pulsador 1 está presionado)</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>  <span class="c1">//   Enciende led D1</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="n">keypressed</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>       <span class="c1">// Si (pulsador 2 está presionado)</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">LED_OFF</span><span class="p">)</span>  <span class="c1">//   Apaga el led D1</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Encender todos los ledes de la siguiente manera.
El led D1 se encenderá al presionar el pulsador 1.
A continuación el led D2 se encenderá al presionar el pulsador 2.
El programa seguirá de esta manera hasta llegar a encender 5 led.
Completar el programa que aparece a continuación.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Programa incompleto.</span>
<span class="c1">// Enciende todos los ledes uno a uno y por orden</span>
<span class="c1">// con todos los pulsadores</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>   <span class="c1">// Inicializar el módulo PC42</span>

   <span class="c1">// Mientras (pulsador 1 no esta presionado), espera</span>
   <span class="k">while</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>

   <span class="c1">// Enciende el led D1</span>
   <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>


<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Programa equivalente en el entorno Ardublock:</p>
<a class="reference external image-reference" href="../_downloads/ardublock_keyPressed_3.abp" rel="noopener noreferrer" target="_blank"><img alt="Programa de Ardublock para encender una secuencia de led con los pulsadores" src="../_images/ardublock_keyPressed_3.png" style="width: 669px;"></a>
<p><a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed_3.abp"><code class="xref download docutils literal notranslate"><span class="pre">Programa</span> <span class="pre">para</span> <span class="pre">entorno</span> <span class="pre">Ardublock:</span> <span class="pre">'keyPressed_3'</span></code></a></p>
</li>
<li><p class="first">Al comenzar, se encenderá el led D1.
Cuando se presione el pulsador 1, se apagará el led D1 y se encenderá
el led siguiente. La luz se moverá así hacia la derecha hasta el led D5.
Al presionar el pulsador 5, el led D5 se apagará y se encenderá de nuevo
el led led D1.
Completar el programa que aparece a continuación según los comentarios.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Programa incompleto.</span>
<span class="c1">// Mover la luz de los ledes hacia la derecha</span>
<span class="c1">// con los pulsadores</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">int</span> <span class="n">i</span><span class="p">;</span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>              <span class="c1">// Inicializar el módulo PC42</span>
   <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>                   <span class="c1">// El primer led encendido es el 1</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>   <span class="c1">// Enciende el led i</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="p">{</span>   <span class="c1">// Si (pulsador i está presionado)</span>
      <span class="n">pc</span><span class="p">.</span>                    <span class="c1">//    Apaga el led i</span>
      <span class="n">i</span> <span class="o">=</span>                    <span class="c1">//    Aumenta i en una unidad</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">)</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>      <span class="c1">// Si (i es mayor que 6) i vale 1</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Programa equivalente en el entorno Ardublock:</p>
<a class="reference external image-reference" href="../_downloads/ardublock_keyPressed_4.abp" rel="noopener noreferrer" target="_blank"><img alt="Programa de Ardublock para encender una secuencia de led con los pulsadores" src="../_images/ardublock_keyPressed_4.png" style="width: 672px;"></a>
<p><a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed_4.abp"><code class="xref download docutils literal notranslate"><span class="pre">Programa</span> <span class="pre">para</span> <span class="pre">entorno</span> <span class="pre">Ardublock:</span> <span class="pre">'keyPressed_4'</span></code></a></p>
</li>
<li><p class="first">Modificar el programa anterior para que los ledes se enciendan desde el
D6 hasta el D1.
Cuando llegue el turno de apagar el led D1, se encenderá de nuevo el
led D6.</p>
</li>
<li><p class="first">Los tres ledes D1, D2 y D3 se encenderán cuando se presione a la vez
los tres pulsadores 1, 2 y 3.
Utiliza el operador '&amp;&amp;' que evalúa si se producen dos condiciones a la
vez.
Completar el programa que aparece a continuación según los comentarios.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Programa incompleto.</span>
<span class="c1">// Enciende los ledes D1, D2, D3 cuando</span>
<span class="c1">// se presionen los pulsadores 1, 2 y 3</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>                <span class="c1">// Inicializar el módulo PC42</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>

   <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="o">&amp;&amp;</span>   <span class="c1">// Si ( (pulsador 1 presionado) y</span>
       <span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="o">&amp;&amp;</span>   <span class="c1">//      (pulsador 2 presionado) y</span>
       <span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="p">{</span>    <span class="c1">//      (pulsador 3 presionado))</span>
      <span class="n">pc</span><span class="p">.</span>                     <span class="c1">//    Enciende los ledes D1, D2 y D3</span>


   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Programa equivalente en el entorno Ardublock:</p>
<a class="reference external image-reference" href="../_downloads/ardublock_keyPressed_5.abp" rel="noopener noreferrer" target="_blank"><img alt="Programa de Ardublock para encender una secuencia de led con los pulsadores" src="../_images/ardublock_keyPressed_5.png" style="width: 680px;"></a>
<p><a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed_5.abp"><code class="xref download docutils literal notranslate"><span class="pre">Programa</span> <span class="pre">para</span> <span class="pre">entorno</span> <span class="pre">Ardublock:</span> <span class="pre">'keyPressed_5'</span></code></a></p>
</li>
<li><p class="first">Después de presionar en orden la secuencia de pulsadores 2, 4 y 1, una
cerradura electrónica se abrirá.
La apertura se indicará encendiendo en secuencia los ledes rojo,
amarillo y verde, uno cada segundo.
Completar los huecos del programa que aparece a continuación según los
comentarios.</p>
<div class="highlight-Arduino notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Programa incompleto.</span>
<span class="c1">// Cerradura electrónica</span>
<span class="c1">// Presionar la secuencia 2, 4, 1 para abrir la cerradura</span>

<span class="cp">#include</span> <span class="cpf">&lt;Wire.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;PC42.h&gt;</span><span class="cp"></span>

<span class="kr">int</span> <span class="nf">step</span><span class="p">;</span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">pc</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>   <span class="c1">// Inicializar el módulo PC42</span>
   <span class="nf">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>     <span class="c1">// Espera la pulsación del primer pulsador</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>

   <span class="c1">// Si (etapa del programa es 1)</span>
   <span class="k">if</span> <span class="p">(</span><span class="nf">step</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Si (solo el pulsador 2 presionado)</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mb">0b00000010</span><span class="p">)</span> <span class="p">{</span>

         <span class="c1">// Espera a que no esté presionado</span>
         <span class="k">while</span><span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>

         <span class="c1">// Pasa a la siguiente etapa del programa</span>
         <span class="nf">step</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
      <span class="p">}</span>
   <span class="p">}</span>

   <span class="c1">// Si (etapa del programa es 2)</span>
   <span class="k">if</span> <span class="p">(</span><span class="nf">step</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Si (solo el pulsador 4 presionado)</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mb">0b001000</span><span class="p">)</span> <span class="p">{</span>

         <span class="c1">// Espera a que no esté presionado</span>
         <span class="k">while</span><span class="p">(</span><span class="n">pc</span><span class="p">.</span><span class="nf">keyPressed</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>

         <span class="c1">// Pasa a la siguiente etapa del programa</span>
         <span class="nf">step</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
      <span class="p">}</span>
   <span class="p">}</span>

   <span class="c1">// Si (etapa del programa es 3)</span>
   <span class="k">if</span> <span class="p">(</span><span class="nf">step</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Si (solo el pulsador 1 presionado)</span>
      <span class="k">if</span> <span class="p">(</span>                       <span class="p">)</span> <span class="p">{</span>

         <span class="c1">// Espera a que no esté presionado</span>


         <span class="c1">// Pasa a la siguiente etapa del programa</span>

      <span class="p">}</span>
   <span class="p">}</span>

   <span class="c1">// Si (etapa del programa es 4)</span>
   <span class="k">if</span> <span class="p">(</span><span class="nf">step</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Enciende el led rojo y espera un segundo</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>
      <span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>

      <span class="c1">// Enciende el led amarillo y espera un segundo</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>
      <span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>

      <span class="c1">// Enciende el led verde y espera un segundo</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledWrite</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">LED_ON</span><span class="p">);</span>
      <span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>

      <span class="c1">// Apaga todos los ledes</span>
      <span class="n">pc</span><span class="p">.</span><span class="n">ledBegin</span><span class="p">();</span>

      <span class="c1">// Pasa a la primera etapa del programa</span>
      <span class="nf">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Programa equivalente en el entorno Ardublock:</p>
<a class="reference external image-reference" href="../_downloads/ardublock_keyPressed_6.abp" rel="noopener noreferrer" target="_blank"><img alt="Programa de Ardublock para encender una secuencia de led con los pulsadores" src="../_images/ardublock_keyPressed_6.png" style="width: 854px;"></a>
<p><a class="reference download internal" download="" href="../_downloads/ardublock_keyPressed_6.abp"><code class="xref download docutils literal notranslate"><span class="pre">Programa</span> <span class="pre">para</span> <span class="pre">entorno</span> <span class="pre">Ardublock:</span> <span class="pre">'keyPressed_6'</span></code></a></p>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>

  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pc42-key2.html" class="btn btn-neutral float-right" title="6. Pulsadores y Eventos" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pc42-led2.html" class="btn btn-neutral" title="4. Parpadeo de los LED" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Anterior</a>
      
    </div>
  

  <hr>

  <div role="contentinfo">
    <ul class="link-list">
    <li><a href="../contacto.html" target="_blank">Contacto</a></li>
    <li><a href="../manifiesto.html" target="_blank">Manifiesto</a></li>
    <li><a href="../../es/legal-aviso.html" target="_blank">Aviso legal</a></li>
    <li><a href="../legal-cookies.html" target="_blank">Política de Cookies</a></li>
    <li><a href="../legal-attribution.html" target="_blank">Créditos</a></li>
    <li><a href="../genindex.html" target="_blank">Glosario</a></li>
    <li><a href="../content.html" target="_blank">Índice</a></li>
    </ul>
    <p class="content-info">
      Copyright &copy; 2013-2025, Carlos Félix Pardo Martín.
      <br>

      Contenidos bajo <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.es" target="_blank">licencia CC BY-SA 4.0</a>
      y programas de ordenador bajo <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank">licencia GPL v3</a>
      a menos que se indique lo contrario.
      <br>
      <span class="lastupdated">
        Actualizado por última vez en enero, 2025.
      </span>

    </p>
  </div> 

</footer>


          

        </div>
      </div>

    </div>


    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo-picuino-bgblue.png" class="logo" alt="O_[]¯O Picuino">
          
          </a>
          <br>
          <a href="../../en/arduprog/pc42-key1.html">English</a>
          <br>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar docs">
    <input type="hidden" name="check_keywords" value="yes">
    <input type="hidden" name="area" value="default">
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../dibujo-index.html">Dibujo Técnico</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mecan-index.html">Mecánica</a></li>
<li class="toctree-l1"><a class="reference internal" href="../material-index.html">Materiales</a></li>
<li class="toctree-l1"><a class="reference internal" href="../electric-index.html">Electricidad</a></li>
<li class="toctree-l1"><a class="reference internal" href="../electronic-index.html">Electrónica</a></li>
<li class="toctree-l1"><a class="reference internal" href="../informatica-index.html">Informática</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prog-index.html">Programación</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Arduino</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="protoboard-index.html">Circuitos con Protoboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="prog-index.html">Programas</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-index.html">Recursos</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="pc42-index.html">Panel de Control PC42</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pc42-intro.html">1. Introducción al panel PC42</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-install.html">2. Instalación del panel de control PC42</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-led1.html">3. Encendido y apagado de los LED</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-led2.html">4. Parpadeo de los LED</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">5. Pulsadores y Estados</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-key2.html">6. Pulsadores y Eventos</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-key3.html">7. Pulsadores y Contadores</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-display1.html">8. Display de 7 segmentos</a></li>
<li class="toctree-l3"><a class="reference internal" href="pc42-buzzer.html">9. Zumbador</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ardublock-index.html">Ardublock</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uno-doc/index.html">Shield Picuino UNO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../robotica-index.html">Robótica</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comm-index.html">Comunicaciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../taller-index.html">Taller de Tecnología</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recursos-index.html">Otros recursos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ley-index.html">Legislación Educativa</a></li>
</ul>

            
          

          <!-- Enlaces directos -->
          <br>
          <ul>
          <li class="toctree-l1"><a class="reference internal"
          href="https://www.picuino.com/es/manifiesto.html">Manifiesto</a>
          </li><li class="toctree-l1"><a class="reference internal"
          href="https://www.picuino.com/test/">Test de Tecnología</a>
          </li><li class="toctree-l1"><a class="reference internal"
          href="https://www.picuino.com/circuits/">Simulador de circuitos</a>
          </li><li class="toctree-l1"><a class="reference internal"
          href="https://github.com/picuino/tecno-recursos">Proyecto en GitHub</a>
          </li>
          </ul>
        </div>
      </div>
    </nav>

  </div>
  


  

    
    
      <script defer id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    

   

  <script defer src="../_static/theme.js"></script>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

</body>
</html>